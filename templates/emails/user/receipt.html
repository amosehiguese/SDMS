{% extends "emails/base/user_base.html" %}

{% block email_title %}Receipt for Order {{ order.order_number }}{% endblock %}

{% block main_content %}
<h2 style="color: #333; margin-bottom: 20px;">Payment Receipt</h2>

<p>Thank you for your payment! Here's your receipt for order <strong>{{ order.order_number }}</strong>.</p>

<div class="info-box">
    <h3 style="margin-bottom: 15px; color: #333;">Receipt Details</h3>
    <table style="width: 100%; border-collapse: collapse;">
        <tr>
            <td style="padding: 8px 0; border-bottom: 1px solid #eee;"><strong>Receipt Number:</strong></td>
            <td style="padding: 8px 0; border-bottom: 1px solid #eee;">{{ receipt.receipt_number }}</td>
        </tr>
        <tr>
            <td style="padding: 8px 0; border-bottom: 1px solid #eee;"><strong>Payment Date:</strong></td>
            <td style="padding: 8px 0; border-bottom: 1px solid #eee;">{{ order.paid_at|date:"F d, Y at g:i A" }}</td>
        </tr>
        <tr>
            <td style="padding: 8px 0; border-bottom: 1px solid #eee;"><strong>Payment Method:</strong></td>
            <td style="padding: 8px 0; border-bottom: 1px solid #eee;">{{ order.payment_method|title }}</td>
        </tr>
    </table>
</div>

<h3 style="color: #333; margin: 25px 0 15px 0;">Items Purchased:</h3>
<table style="width: 100%; border-collapse: collapse; border: 1px solid #eee;">
    <thead>
        <tr style="background-color: #f8f9fa;">
            <th style="padding: 12px; text-align: left; border-bottom: 1px solid #eee;">Item</th>
            <th style="padding: 12px; text-align: center; border-bottom: 1px solid #eee;">Qty</th>
            <th style="padding: 12px; text-align: right; border-bottom: 1px solid #eee;">Price</th>
            <th style="padding: 12px; text-align: right; border-bottom: 1px solid #eee;">Total</th>
        </tr>
    </thead>
    <tbody>
        {% for item in order.items.all %}
        <tr>
            <td style="padding: 12px; border-bottom: 1px solid #eee;">{{ item.product.title }}</td>
            <td style="padding: 12px; text-align: center; border-bottom: 1px solid #eee;">{{ item.quantity }}</td>
            <td style="padding: 12px; text-align: right; border-bottom: 1px solid #eee;">₦{{ item.price|floatformat:0 }}</td>
            <td style="padding: 12px; text-align: right; border-bottom: 1px solid #eee;">₦{{ item.get_total_price|floatformat:0 }}</td>
        </tr>
        {% endfor %}
    </tbody>
    <tfoot>
        <tr>
            <td colspan="3" style="padding: 12px; text-align: right; border-top: 2px solid #333;"><strong>Subtotal:</strong></td>
            <td style="padding: 12px; text-align: right; border-top: 2px solid #333;"><strong>₦{{ order.subtotal|floatformat:0 }}</strong></td>
        </tr>
        {% if order.shipping_cost > 0 %}
        <tr>
            <td colspan="3" style="padding: 12px; text-align: right;"><strong>Shipping:</strong></td>
            <td style="padding: 12px; text-align: right;"><strong>₦{{ order.shipping_cost|floatformat:0 }}</strong></td>
        </tr>
        {% endif %}
        {% if order.tax_amount > 0 %}
        <tr>
            <td colspan="3" style="padding: 12px; text-align: right;"><strong>Tax:</strong></td>
            <td style="padding: 12px; text-align: right;"><strong>₦{{ order.tax_amount|floatformat:0 }}</strong></td>
        </tr>
        {% endif %}
        <tr>
            <td colspan="3" style="padding: 12px; text-align: right; font-size: 18px;"><strong>TOTAL PAID:</strong></td>
            <td style="padding: 12px; text-align: right; font-size: 18px; color: #28a745;"><strong>₦{{ order.total|floatformat:0 }}</strong></td>
        </tr>
    </tfoot>
</table>

<p style="margin-top: 20px; font-size: 14px; color: #666;">
    Please keep this receipt for your records. If you need to return or exchange any items, please reference the receipt number above.
</p>
{% endblock %}